parameters:
    jmsche_elastica.indexes: []
    jmsche_elastica.config: []

services:
    jmsche_elastica.service:
        class: Jmsche\ElasticaBundle\Service
        arguments: [@jmsche_elastica.client, %jmsche_elastica.namespace%]
        calls:
            - [setContainer, [ @service_container ]]
            - [setIndexes, [ %jmsche_elastica.indexes% ]]

    jmsche_elastica.client:
        class: Jmsche\ElasticaBundle\Client
        arguments: [%jmsche_elastica.config%]
        calls:
            - [setLogger, [ @jmsche_elastica.logger ]]

    jmsche_elastica.subscriber:
        class: Jmsche\ElasticaBundle\Listener\IndexSubscriber
        arguments: [@jmsche_elastica.service]
        tags:
            - { name: doctrine.event_subscriber }

    jmsche_elastica.logger:
        class: Jmsche\ElasticaBundle\Logger\ElasticaLogger
        arguments: [ @logger, %kernel.debug% ]
        tags:
            - { name: monolog.logger, channel: elastica }

    jmsche_elastica.data_collector:
        class: Jmsche\ElasticaBundle\DataCollector\ElasticaDataCollector
        arguments: [ @jmsche_elastica.logger ]
        tags:
            - { name: data_collector, template: "JmscheElasticaBundle:Collector:elastica", id: "elastica" }